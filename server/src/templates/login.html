<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
</head>
<body>
    <h1 id="header">Login page</h1>
    {% if logged_in %}
        <h1 id="logged_in">Logged in!</h1>
    {% else %}
        <form id="login-form" method="post" action="login" onsubmit="login(event, this)">
            <input id="username" name="username" type="text">
            <input id="password" name="password" type="text">
            <input id="submit" type="submit">
        </form>
    {% endif %}
    {% if error %}
        <h1 id="error">{{ error }}</h1>
    {% endif %}
</body>
<script>
    function login(e, form) {
        fetch('login', {
            body: new FormData(form)
        }).then(response => {
            response.text().then(text => {
                    document.body.innerHTML = text
                }
            )
        })
    }
</script>
</html>